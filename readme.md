# 自制 Q-Code 的 NY5 demo

## 按键对应端口

```
PA.0 ==> 按键1
PA.1 ==> 按键2
PA.2 ==> 按键3
PA.3 ==> 按键4
```

## 功能

### 按键1

1. 按住按键开机，进入测试模式

- PB.0输出1KHz方波；
- 松开按键，进入检测ROM数据是否正确
	- 若正确，PB.0置高电平
	- 若错误，PB.0置低电平
- 进入正常模式

2. 当前歌曲循环播放。

### 按键2

1. 短按：播放下一曲，单曲循环
2. 长按：停止播放（长按时间为2秒）

**注意**：

1. 当按到超出播放数时，停止播放，再次短按则重新播放第一个声音。

如demo中有4个声音，短按第5次停止播放，第6次播放第一个声音。

2. 当短按第5次停止播放时，按下按键1，播放第一个声音。

### 按键三

音量+

### 按键四

音量-

## 其他说明

1. 上电后音量为中音量

2. 程序中设置了常量：

```
D_VoiceSum		= 4
```

作为声音的总数。若后续需修改声音数量而不修改功能时，可直接在添加或删除声音后修改次常量的值即可。

